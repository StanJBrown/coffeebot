<launch>


	<include file="$(find freenect_launch)/launch/freenect.launch">
		<arg name="depth_registration" value="true" />
	</include>

	
	<include file="$(find rtabmap_ros)/launch/rgbd_mapping.launch">
                <arg name="rtabmap_args" value="-delete_db_on_start" />
		<arg name="rviz" value="true" />
                <arg name="rtabmapviz" value="true" />
	</include>
	<!--
	<group ns="rtabmap">
		<node name="rtabmap" pkg="rtabmap_ros" type="rtabmap" output="screen" args="-delete_db_on_start">
			<param name="rtabmapviz" type="bool" value="true" />
		</node>



	</group>
	-->
	<!--
	<group ns="rtabmap">
		<node name="rtabmap" pkg="rtabmap_ros" type="rtabmap" output="screen" args="-delete_db_on_start">
			<param name="rtabmapviz" type="bool" value="true" />
			<param name="rviz" type="bool" value="true" />

			<param name="frame_id" type="string" value="camera_link" />
			<param name="subscribe_depth" type="bool" value="true" />
			<remap from="odom" to="/husky_velocity_controller/odom" />
			<remap from="rgb/image" to="/camera/rgb/image_rect_color"/>
			<remap from="depth/image" to="/camera/depth_registered/image_raw"/>
			<remap from="rgb/camera_info" to="/camera/rgb/camera_info"/>
			<param name="queue_size" type="int" value="10"/>

			<!- RTAB-Map's parameters ->
			<param name="RGBD/AngularUpdate" type="string" value="0.01"/>
			<param name="RGBD/LinearUpdate" type="string" value="0.01"/>
			<param name="Rtabmap/TimeThr" type="string" value="700"/>
			<param name="Mem/RehearsalSimilarity" type="string" value="0.45"/>
			<param name="RGBD/OptimizeFromGraphEnd" type="string" value="true"/>
		</node>
	</group>
	-->
        <include file="$(find husky_base)/launch/base.launch" />
	<node pkg="tf" type="static_transform_publisher" name="kinect_tf_publisher" 
		args="0 0 0 0 0 0 base_link camera_link 100" />


</launch>
