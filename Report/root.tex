%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%2345678901234567890123456789012345678901234567890123456789012345678901234567890
%        1         2         3         4         5         6         7         8

\documentclass[letterpaper, 10 pt, conference]{ieeeconf}  % Comment this line out if you need a4paper

%\documentclass[a4paper, 10pt, conference]{ieeeconf}      % Use this line for a4 paper

\IEEEoverridecommandlockouts                              % This command is only needed if 
                                                          % you want to use the \thanks command

\overrideIEEEmargins                                      % Needed to meet printer requirements.

% See the \addtolength command later in the file to balance the column lengths
% on the last page of the document

% The following packages can be found on http:\\www.ctan.org
%\usepackage{graphics} % for pdf, bitmapped graphics files
%\usepackage{epsfig} % for postscript graphics files
%\usepackage{mathptmx} % assumes new font selection scheme installed
%\usepackage{times} % assumes new font selection scheme installed
%\usepackage{amsmath} % assumes amsmath package installed
%\usepackage{amssymb}  % assumes amsmath package installed

\title{\LARGE \bf
CoffeeBot
}


\author{Jason Rebello$^{1}$ and Ian Colwell$^{2}$% <-this % stops a space
%\thanks{*This work was not supported by any organization}% <-this % stops a space
%\thanks{$^{1}$Albert Author is with Faculty of Electrical Engineering, Mathematics and Computer Science,
%        University of Twente, 7500 AE Enschede, The Netherlands
%        {\tt\small albert.author@papercept.net}}%
%\thanks{$^{2}$Bernard D. Researcheris with the Department of Electrical Engineering, Wright State University,
%        Dayton, OH 45435, USA
%        {\tt\small b.d.researcher@ieee.org}}%
}


\begin{document}



\maketitle
\thispagestyle{empty}
\pagestyle{empty}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{abstract}

This electronic document is a ÒliveÓ template. The various components of your paper [title, text, heads, etc.] are already defined on the style sheet, as illustrated by the portions given in this document.

\end{abstract}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{INTRODUCTION/MOTIVATION}

Robotics holds tremendous potential for benefiting every domain of human life. There is a growing need for robots to operate intelligently and adapt to their changing environment without direct human supervision. The delivery chain is one of the main areas where autonomous robots have established a foothold.
One of the most important tasks that nurses in a hospital spend a lot of time doing is giving medications to patients. Hospitals move an immense amount of materials through hallways, on elevators, in basements and to patient units. This is a complex demanding internal logistics challenge that has implications of cost, quality and safety. Automating delivery of this material generates considerable savings and efficiency. It usually requires a human to make a dedicated trip to a pharmacy that may be on a different floor of the hospital. This sort of thing is a waste of time for highly trained medical professionals, which is why a robot makes sense to have as a delivery system. 
In this paper we will present our method at developing an autonomous robot for coffee delivery to a particular room on the third floor of engineering 5. Although the project was undertaken with the task of coffee delivery the concepts employed can be used for any other autonomous delivery system as stated above. One of the significant challenges in developing an autonomous robot is its ability to effectively localize itself in a predefined map while navigating to a specific location. We will present our approach at tackling these problems and perform a comparison of our custom Probabilistic roadmap and A-star path planning techniques in terms of optimal path generation, runtime to generate paths and ways of improvement.

\section{BACKGROUND WORK}

There have been several robots that have been developed for autonomous delivery. Amazon has undertaken the development of autonomous drones as part of its Prime Air delivery system. Google has recently announced its desire to deliver packages from self-driving trucks. More aligned with our project is the Tug autonomous medical robot that delivers and transports medicines in an efficient and safe manner. Similarly Panasonic has been working on its Hospi hospital delivery robot in order to ferry small and important things (like drugs) from one place to another. In most of these robots the main sensors are some form of Lidar sensor (mostly 3D) that give fast response and at the same time provide good field of view. Besides this, they also use a camera as a primary tool for place recognition.

\section{SYSTEM OVERVIEW}



\subsection{Hardware Used} 

We use the 'Husky' unmanned ground vehicle as our mobile robot. The advantage of using the husky is its large payload capacity and power systems that can accommodate a variety of sensors. We make use of the UTM-30LX laser scanner by Hokuyo. One of the main advantages of using this sensor is its large 270 degree field of view. The sensor returns a list of range measurements in the form of a 2D point cloud. This sensor is extremely useful in doing scan registration for mapping and localization. The final sensor used is the Microsoft Xbox kinect sensor that contains a color VGA video camera which is used to take images of the environment and a depth sensor that returns a 3D point cloud for reconstruction of the location.

* Image of entire setup and image of kinect and lidar sensor 

\subsection{Software Used}

The software framework used for this project is ROS (Robot Operating System). ROS provided a convenient framework to build the coffeebot system using both existing open source ROS packages and the newly created coffeebot ROS package. The most important ROS packages used are briefly mentioned below, more detail will be provided in the corresponding section.

\subsubsection{RTAB-Map}

RTAB-Map is used for mapping the environment and then localizing within it. RTAB-Map stands for ?real-time appearance-based mapping? and is a ?RGB-D Graph-Based SLAM approach based on an incremental appearance-based loop closure detector?. 
** citation [http://introlab.github.io/rtabmap/] 
This project used rtabmap for two main functions. First, mapping was performed of the environment in which the robot will be operated. RTAB-Map is capable of generating both a 3D point cloud map and also a 2D occupancy grid that is aligned with the point cloud. Each map generated by RTAB-Map also contains a graph based image library. Feature extraction is used on the image library for loop closure detection. Second, localization within the generated map was another core function provided by RTAB-Map. The localization function allowed the robot to be located within the previously built occupancy grid which is essential for path planning.

\subsubsection{ROS Navigation Stack}

The ROS navigation stack is a set of ROS packages designed for moving a robot autonomously. The stack primarily consists of cost map generation for obstacle avoidance and path planning/execution for moving the robot. The "move\_base" ROS node was used to tie all the navigation stack functions together and issue commands to drive the robot. 

\subsubsection{Coffeebot}

A new ROS package was created for the coffeebot project which consisted of three main parts. Each part will be covered in more detail in the corresponding section of this report. The first important part of the package is the launch files. Launch files were created to run the coffeebot, run husky simulations, and build maps from bagged data. Second, a ROS service was created to issue navigation goals based on room number requests. Third, a global path planner was written as a plugin to the navigation stack. 

\subsubsection{RViz}

Finally, RViz was used to visualize all the data being passed around inside ROS. RViz is a popular data visualization tool that is easy to configure. Custom configurations were created specifically for the coffeebot in order to make debugging quicker and easier. 

The various pieces of software came together to create a functional system as shown in Figure XX. Figure XX is a simplified system architecture describing the system while in navigation mode. Navigation mode assumes a map of the environment has already been built and the robot has already localized within the map at least once.

\section{Methodology}

\subsection{Mapping}

Mapping: *** 1) Map of whole floor 2) zoomed in version of hallway 3) Occupancy grid *****
Autonomous robots operating in real life settings must be able to navigate in large, unstructured, dynamic and unknown spaces. To do so they must build a map of their operating environment. A map of the 3rd floor of Engineering 5 was built with the help of RTabmap as described in Section 3 while utilizing g2o and vertigo. The ?generalized graph optimization? (g2o) framework is an open-source C++ framework for optimizing graph-based nonlinear error functions. Vertigo is a C++ extension that enables g2o to solve pose graph SLAM problems in 2D and 3D despite a large number of false positive loop closure constraints. RTabmap mainly relies on the detection of SURF features in order extract visual words from the scene. Since the robot is constrained to operate in a single plane, the transformation can be refined with 2D iterative-closest-point (ICP) optimization using laser scans. With the help of ICP an occupancy grid map is generated. This grid map will then be used to generate the static global cost map during path planning.

\subsection{Localization}

Once a map of the environment is completed, it is essential to be able to localize the robot within the existing map each time the robot is restarted. Without reliable localization, the previously generated map is essentially useless for navigation purposes. Fortunately, RTAB-Map includes a localization mode that works very similar to the mapping mode. In localization mode feature matches are detected between the saved image library and the input from the RGB-D camera (kinect). If sufficient matching is found then an estimate is made on the position of the robot within the map. This is very similar to the loop closure detection performed in mapping mode, the only difference being that no new constraints are added to the graph. 

\subsection{Planning/Navigation}

As part of the navigation to various rooms we developed two path planning algorithms. Both planners make use of a predefined global occupancy grid that was generated during the map building process as well as a local cost map that handles static and dynamic targets that weren?t previously seen in the global cost map. 
--costmaps


\subsection{Global PRM Planner}

A custom global planner was created to generate paths for the coffeebot. The planner utilized a global costmap provided by the navigation stack to find paths between start and goal locations while avoiding areas of cost. The Probabilistic Roadmap (PRM) technique was utilized to generate a path. Creating a Probabilistic Road Maps starts with randomly sampling either the configuration space of the robot or the physical environment of the robot. While the Husky is non-holonomic, it is able to turn on the spot. For this reason, and to avoid unnecessary over complication, it was decided to sample over the environment space instead of the configuration space. Each random sample consisted of a world coordinate on the global cost map (both an X and Y position in meters). As each sample is created, the corresponding cell of the costmap is checked for a cost. If the cost is less than the allowable cost threshold then the sample is added to a list of milestones which represent all the samples that are located in free space according to the occupancy grid. The start and goal locations are also added as milestones if they are located in free space. The completed milestone list is then iterated over to find the 20 nearest milestones to each milestone. A line to each of the nearest milestones is traced over the costmap using the bresenham line algorithm. While the line is being traced, each costmap cell in the line is checked to determine if the cost of the cell is greater than the cost threshold. The lines between milestones that can be traced without passing over costly cells are then added as edges in the roadmap. Once all the available edges are created a graph based A-Star search algorithm is employed to find the shortest path through the network. The final step of the path generation is then a path refinement. The path returned by A-Star is then refined by attempting to skip nodes in the graph. Starting from the goal node and working back, the same bresenham line cost checking as mentioned earlier is used to check the line between the goal node and the third-from-last node. If this line is found to be clear of costs then the second-from-last node is dropped from the path. This process repeats until every ?shortcut? in the path results in traversing a cell of cost.
Finally, the path is sent back to the move\_base node to be executed by the local planner. For debugging purposes, the network is also published using geometry\_msgs ROS messages for easy display in RViz. 

*mention that sample size, and nearest points are all variable.

\subsection{A-Star Global Planner}

The A* algorithm combines features of uniform-cost search and pure heuristic search to efficiently compute optimal solutions. A* algorithm is a best-first search algorithm in which the cost associated with a node is f(n) = g(n) + h(n), where g(n) is the cost of the path from the initial state to node n and h(n) is the heuristic estimate or the cost of the path from node n to the goal. Thus, f(n) estimates the lowest total cost of any solution path going through node n. At each point a node with lowest f value is chosen for expansion. Ties are broken randomly. The algorithm terminates when a goal is chosen for expansion. A* algorithm guides an optimal path to a goal if the heuristic function h(n) is admissible, meaning it never over-estimates the actual cost.

\section{RESULTS}

\section{CONCLUSION AND FUTURE WORK}

In the future there will be a need for teams of small, agile autonomous robotic units to perform intelligence, surveillance and reconnaissance (ISR) missions. As a result, we would like to extend the coffeebot to communicate with quadrotors. Person following and tracking is another area of interest. In industry most robots are programmed to perform specific tasks. However if the robot can track a ?master? it will have the ability to learn new tasks.

\subsection{Headings, etc}

Text heads organize the topics on a relational, hierarchical basis. For example, the paper title is the primary text head because all subsequent material relates and elaborates on this one topic. If there are two or more sub-topics, the next level head (uppercase Roman numerals) should be used and, conversely, if there are not at least two sub-topics, then no subheads should be introduced. Styles named ÒHeading 1Ó, ÒHeading 2Ó, ÒHeading 3Ó, and ÒHeading 4Ó are prescribed.

\subsection{Figures and Tables}

Positioning Figures and Tables: Place figures and tables at the top and bottom of columns. Avoid placing them in the middle of columns. Large figures and tables may span across both columns. Figure captions should be below the figures; table heads should appear above the tables. Insert figures and tables after they are cited in the text. Use the abbreviation ÒFig. 1Ó, even at the beginning of a sentence.

\begin{table}[h]
\caption{An Example of a Table}
\label{table_example}
\begin{center}
\begin{tabular}{|c||c|}
\hline
One & Two\\
\hline
Three & Four\\
\hline
\end{tabular}
\end{center}
\end{table}


   \begin{figure}[thpb]
      \centering
      \framebox{\parbox{3in}{We suggest that you use a text box to insert a graphic (which is ideally a 300 dpi TIFF or EPS file, with all fonts embedded) because, in an document, this method is somewhat more stable than directly inserting a picture.
}}
      %\includegraphics[scale=1.0]{figurefile}
      \caption{Inductance of oscillation winding on amorphous
       magnetic core versus DC bias magnetic field}
      \label{figurelabel}
   \end{figure}
   

Figure Labels: Use 8 point Times New Roman for Figure labels. Use words rather than symbols or abbreviations when writing Figure axis labels to avoid confusing the reader. As an example, write the quantity ÒMagnetizationÓ, or ÒMagnetization, MÓ, not just ÒMÓ. If including units in the label, present them within parentheses. Do not label axes only with units. In the example, write ÒMagnetization (A/m)Ó or ÒMagnetization {A[m(1)]}Ó, not just ÒA/mÓ. Do not label axes with a ratio of quantities and units. For example, write ÒTemperature (K)Ó, not ÒTemperature/K.Ó

\section{CONCLUSIONS}

A conclusion section is not required. Although a conclusion may review the main points of the paper, do not replicate the abstract as the conclusion. A conclusion might elaborate on the importance of the work or suggest applications and extensions. 

\addtolength{\textheight}{-12cm}   % This command serves to balance the column lengths
                                  % on the last page of the document manually. It shortens
                                  % the textheight of the last page by a suitable amount.
                                  % This command does not take effect until the next page
                                  % so it should come on the page before the last. Make
                                  % sure that you do not shorten the textheight too much.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section*{APPENDIX}

Appendixes should appear before the acknowledgment.

\section*{ACKNOWLEDGMENT}

The preferred spelling of the word ÒacknowledgmentÓ in America is without an ÒeÓ after the ÒgÓ. Avoid the stilted expression, ÒOne of us (R. B. G.) thanks . . .Ó  Instead, try ÒR. B. G. thanksÓ. Put sponsor acknowledgments in the unnumbered footnote on the first page.



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

References are important to the reader; therefore, each citation must be complete and correct. If at all possible, references should be commonly available publications.



\begin{thebibliography}{99}

\bibitem{c1} G. O. Young, ÒSynthetic structure of industrial plastics (Book style with paper title and editor),Ó 	in Plastics, 2nd ed. vol. 3, J. Peters, Ed.  New York: McGraw-Hill, 1964, pp. 15Ð64.
\bibitem{c2} W.-K. Chen, Linear Networks and Systems (Book style).	Belmont, CA: Wadsworth, 1993, pp. 123Ð135.
\bibitem{c3} H. Poor, An Introduction to Signal Detection and Estimation.   New York: Springer-Verlag, 1985, ch. 4.
\bibitem{c4} B. Smith, ÒAn approach to graphs of linear forms (Unpublished work style),Ó unpublished.
\bibitem{c5} E. H. Miller, ÒA note on reflector arrays (Periodical styleÑAccepted for publication),Ó IEEE Trans. Antennas Propagat., to be publised.
\bibitem{c6} J. Wang, ÒFundamentals of erbium-doped fiber amplifiers arrays (Periodical styleÑSubmitted for publication),Ó IEEE J. Quantum Electron., submitted for publication.
\bibitem{c7} C. J. Kaufman, Rocky Mountain Research Lab., Boulder, CO, private communication, May 1995.
\bibitem{c8} Y. Yorozu, M. Hirano, K. Oka, and Y. Tagawa, ÒElectron spectroscopy studies on magneto-optical media and plastic substrate interfaces(Translation Journals style),Ó IEEE Transl. J. Magn.Jpn., vol. 2, Aug. 1987, pp. 740Ð741 [Dig. 9th Annu. Conf. Magnetics Japan, 1982, p. 301].
\bibitem{c9} M. Young, The Techincal Writers Handbook.  Mill Valley, CA: University Science, 1989.
\bibitem{c10} J. U. Duncombe, ÒInfrared navigationÑPart I: An assessment of feasibility (Periodical style),Ó IEEE Trans. Electron Devices, vol. ED-11, pp. 34Ð39, Jan. 1959.
\bibitem{c11} S. Chen, B. Mulgrew, and P. M. Grant, ÒA clustering technique for digital communications channel equalization using radial basis function networks,Ó IEEE Trans. Neural Networks, vol. 4, pp. 570Ð578, July 1993.
\bibitem{c12} R. W. Lucky, ÒAutomatic equalization for digital communication,Ó Bell Syst. Tech. J., vol. 44, no. 4, pp. 547Ð588, Apr. 1965.
\bibitem{c13} S. P. Bingulac, ÒOn the compatibility of adaptive controllers (Published Conference Proceedings style),Ó in Proc. 4th Annu. Allerton Conf. Circuits and Systems Theory, New York, 1994, pp. 8Ð16.
\bibitem{c14} G. R. Faulhaber, ÒDesign of service systems with priority reservation,Ó in Conf. Rec. 1995 IEEE Int. Conf. Communications, pp. 3Ð8.
\bibitem{c15} W. D. Doyle, ÒMagnetization reversal in films with biaxial anisotropy,Ó in 1987 Proc. INTERMAG Conf., pp. 2.2-1Ð2.2-6.
\bibitem{c16} G. W. Juette and L. E. Zeffanella, ÒRadio noise currents n short sections on bundle conductors (Presented Conference Paper style),Ó presented at the IEEE Summer power Meeting, Dallas, TX, June 22Ð27, 1990, Paper 90 SM 690-0 PWRS.
\bibitem{c17} J. G. Kreifeldt, ÒAn analysis of surface-detected EMG as an amplitude-modulated noise,Ó presented at the 1989 Int. Conf. Medicine and Biological Engineering, Chicago, IL.
\bibitem{c18} J. Williams, ÒNarrow-band analyzer (Thesis or Dissertation style),Ó Ph.D. dissertation, Dept. Elect. Eng., Harvard Univ., Cambridge, MA, 1993. 
\bibitem{c19} N. Kawasaki, ÒParametric study of thermal and chemical nonequilibrium nozzle flow,Ó M.S. thesis, Dept. Electron. Eng., Osaka Univ., Osaka, Japan, 1993.
\bibitem{c20} J. P. Wilkinson, ÒNonlinear resonant circuit devices (Patent style),Ó U.S. Patent 3 624 12, July 16, 1990. 






\end{thebibliography}




\end{document}
